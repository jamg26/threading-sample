<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript Event Loop Demo</title>
    <style>
        body { font-family: system-ui, sans-serif; padding: 20px; max-width: 600px; }
        button { padding: 10px 20px; margin: 10px 0; font-size: 16px; cursor: pointer; }
        #status { font-weight: bold; margin-bottom: 20px; padding: 10px; background: #f0f0f0; border-radius: 4px; }
        .interactive-area { padding: 15px; border: 2px dashed #ccc; background: #fafafa; }
        input { padding: 8px; width: 80%; font-size: 16px; }
    </style>
</head>
<body>

    <h2>JavaScript Threading Demonstration</h2>
    
    <div id="status">Status: Ready</div>

    <button id="btn-block">Demo 1: Block Main Thread (10s)</button>
    <br>
    <button id="btn-async">Demo 2: Async Web API (10s)</button>

    <div class="interactive-area">
        <label for="test-input"><strong>Test UI Responsiveness:</strong></label><br><br>
        <input type="text" id="test-input" placeholder="Try typing here while a process is running...">
    </div>

    <script>
        const statusEl = document.getElementById('status');
        const btnBlock = document.getElementById('btn-block');
        const btnAsync = document.getElementById('btn-async');

        // Demo 1: Synchronous Blocking
        btnBlock.addEventListener('click', () => {
            statusEl.textContent = 'Status: Blocking UI for 10 seconds... (Try typing below, it will hang)';
            statusEl.style.color = 'red';

            // Allow DOM to update text before blocking by using a minimal timeout
            setTimeout(() => {
                const start = Date.now();
                // Synchronous while loop monopolizes the Call Stack
                while (Date.now() - start < 10000) {
                    // CPU spins here. Event Loop cannot process clicks, typing, or renders.
                }

                statusEl.textContent = 'Status: Blocking finished!';
                statusEl.style.color = 'green';
            }, 50); 
        });

        // Demo 2: Asynchronous Non-Blocking
        btnAsync.addEventListener('click', () => {
            statusEl.textContent = 'Status: Waiting 10 seconds asynchronously... (Typing works perfectly)';
            statusEl.style.color = 'orange';

            // setTimeout offloads the timer to the Browser's Web APIs
            setTimeout(() => {
                // This callback enters the Task Queue and executes only when the Call Stack is empty
                statusEl.textContent = 'Status: Async wait finished!';
                statusEl.style.color = 'green';
            }, 10000);
        });
    </script>
</body>
</html>
